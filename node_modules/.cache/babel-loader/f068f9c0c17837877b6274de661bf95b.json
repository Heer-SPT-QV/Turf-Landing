{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/var/www/turf2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/var/www/turf2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useContext,useRef}from\"react\";import{Link,Redirect,useHistory,useLocation}from\"react-router-dom\";import classnames from\"classnames\";import{AiOutlineGoogle,AiFillFacebook,AiFillLinkedin,AiOutlineTwitter}from\"react-icons/ai\";import{Context}from\"../data/context\";import CartRightSideComponent from\"../components/CartRightSideComponent\";import styles from\"../css/Login.module.css\";import{toast}from\"react-toastify\";import axios from\"axios\";import api from\"../config/api\";import headerWithoutToken from\"../config/headerWithoutToken\";var Login=function Login(){var _useLocation=useLocation(),state=_useLocation.state;var history=useHistory();var _useContext=useContext(Context),isLoggedIn=_useContext.isLoggedIn,setIsLoggedIn=_useContext.setIsLoggedIn;var phoneRef=useRef(null);var passwordRef=useRef(null);var handleSignInBtnClicked=function handleSignInBtnClicked(){if(!phoneRef.current.value.trim().length){toast.error(\"Phone Number Cannot be empty\");return;}if(!passwordRef.current.value.trim().length){toast.error(\"Password Cannot be empty\");return;}var values={username:phoneRef.current.value,password:passwordRef.current.value};axios.post(api+\"user/login\",values,headerWithoutToken).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(res){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(res.data.code===200)){_context.next=6;break;}_context.next=3;return localStorage.setItem(\"turfUserDetails\",JSON.stringify(res.data.body));case 3:if(localStorage.getItem(\"turfCart\")!==null){localStorage.removeItem(\"turfCart\");}setIsLoggedIn(true);history.push((state===null||state===void 0?void 0:state.from)||\"/\");case 6:if(res.data.code===404){toast.error(res.data.message);}case 7:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}()).catch(function(err){console.log(\"error here\",err);console.log(\"res\",err.response);if(err.response.code===500){toast.error(err.response.data.message);}});};var LoginSideComponent=function LoginSideComponent(){return/*#__PURE__*/_jsxs(\"div\",{className:\"my-5 mx-3\",children:[/*#__PURE__*/_jsx(\"p\",{className:classnames(\"subtitle is-1 is-capitalized has-text-white has-text-centered\"),children:\"Sign in\"}),/*#__PURE__*/_jsxs(Link,{to:{pathname:\"/signup\",state:{from:(state===null||state===void 0?void 0:state.from)||\"/\"}},className:classnames(\"subtitle is-capitalized has-text-white \"),children:[\"New User?\",/*#__PURE__*/_jsxs(\"span\",{className:classnames(\"has-text-info\"),children:[\" \",\"Create An Account\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field my-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"input\",{className:classnames(\"input\",styles.LoginInputs),type:\"text\",placeholder:\"Phone Number\",required:true,ref:phoneRef})}),/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"input\",{className:classnames(\"input mt-3\",styles.LoginInputs),type:\"password\",placeholder:\"Password\",required:true,ref:passwordRef})}),/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"checkbox has-text-white \",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\"}),/*#__PURE__*/_jsx(\"span\",{className:\"is-size-5 ml-3\",children:\"Keep me signed in\"})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"has-text-centered my-6\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleSignInBtnClicked();},className:classnames(styles.signInBtn,\"is-clickable\"),children:\"Sign In\"})}),/*#__PURE__*/_jsxs(\"div\",{className:classnames(styles.dividerWrapper),children:[/*#__PURE__*/_jsx(\"div\",{className:classnames(styles.dividerLine)}),/*#__PURE__*/_jsx(\"p\",{className:classnames(\"has-text-white subtitle\"),children:\"Or Sign In With\"}),/*#__PURE__*/_jsx(\"div\",{className:classnames(styles.dividerLine)})]}),/*#__PURE__*/_jsxs(\"div\",{className:classnames(\"my-6\",styles.socialIconsWrapper),children:[/*#__PURE__*/_jsx(AiOutlineGoogle,{size:40,color:\"#FFF\"}),/*#__PURE__*/_jsx(AiFillFacebook,{size:40,color:\"#FFF\"}),/*#__PURE__*/_jsx(AiFillLinkedin,{size:40,color:\"#FFF\"}),/*#__PURE__*/_jsx(AiOutlineTwitter,{size:40,color:\"#FFF\"})]})]});};if(isLoggedIn){return/*#__PURE__*/_jsx(Redirect,{to:(state===null||state===void 0?void 0:state.from)||\"/\"});}return/*#__PURE__*/_jsx(\"div\",{className:classnames(\"section\",styles.LoginWrapper),children:/*#__PURE__*/_jsx(\"div\",{className:classnames(\"container is-fluid\",styles.overRideContainer),children:/*#__PURE__*/_jsxs(\"div\",{className:classnames(\" columns mt-5\",styles.LoginColumns),children:[/*#__PURE__*/_jsx(\"div\",{className:classnames(\"column box\",styles.LoginLeftWrapper),children:/*#__PURE__*/_jsx(LoginSideComponent,{})}),/*#__PURE__*/_jsx(\"div\",{className:classnames(\"column is-two-thirds\",styles.LoginCartWrapper),children:/*#__PURE__*/_jsx(CartRightSideComponent,{})})]})})});};export default Login;","map":{"version":3,"sources":["/var/www/turf2/src/pages/Login.jsx"],"names":["React","useContext","useRef","Link","Redirect","useHistory","useLocation","classnames","AiOutlineGoogle","AiFillFacebook","AiFillLinkedin","AiOutlineTwitter","Context","CartRightSideComponent","styles","toast","axios","api","headerWithoutToken","Login","state","history","isLoggedIn","setIsLoggedIn","phoneRef","passwordRef","handleSignInBtnClicked","current","value","trim","length","error","values","username","password","post","then","res","data","code","localStorage","setItem","JSON","stringify","body","getItem","removeItem","push","from","message","catch","err","console","log","response","LoginSideComponent","pathname","LoginInputs","signInBtn","dividerWrapper","dividerLine","socialIconsWrapper","LoginWrapper","overRideContainer","LoginColumns","LoginLeftWrapper","LoginCartWrapper"],"mappings":"+VAAA,MAAOA,CAAAA,KAAP,EAAgBC,UAAhB,CAA4BC,MAA5B,KAA0C,OAA1C,CACA,OAASC,IAAT,CAAeC,QAAf,CAAyBC,UAAzB,CAAqCC,WAArC,KAAwD,kBAAxD,CACA,MAAOC,CAAAA,UAAP,KAAuB,YAAvB,CACA,OACEC,eADF,CAEEC,cAFF,CAGEC,cAHF,CAIEC,gBAJF,KAKO,gBALP,CAMA,OAASC,OAAT,KAAwB,iBAAxB,CACA,MAAOC,CAAAA,sBAAP,KAAmC,sCAAnC,CACA,MAAOC,CAAAA,MAAP,KAAmB,yBAAnB,CACA,OAASC,KAAT,KAAsB,gBAAtB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,GAAP,KAAgB,eAAhB,CACA,MAAOC,CAAAA,kBAAP,KAA+B,8BAA/B,CAEA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,EAAM,kBACAb,WAAW,EADX,CACVc,KADU,cACVA,KADU,CAElB,GAAMC,CAAAA,OAAO,CAAGhB,UAAU,EAA1B,CAFkB,gBAIoBJ,UAAU,CAACW,OAAD,CAJ9B,CAIVU,UAJU,aAIVA,UAJU,CAIEC,aAJF,aAIEA,aAJF,CAKlB,GAAMC,CAAAA,QAAQ,CAAGtB,MAAM,CAAC,IAAD,CAAvB,CACA,GAAMuB,CAAAA,WAAW,CAAGvB,MAAM,CAAC,IAAD,CAA1B,CAEA,GAAMwB,CAAAA,sBAAsB,CAAG,QAAzBA,CAAAA,sBAAyB,EAAM,CACnC,GAAI,CAACF,QAAQ,CAACG,OAAT,CAAiBC,KAAjB,CAAuBC,IAAvB,GAA8BC,MAAnC,CAA2C,CACzCf,KAAK,CAACgB,KAAN,CAAY,8BAAZ,EACA,OACD,CACD,GAAI,CAACN,WAAW,CAACE,OAAZ,CAAoBC,KAApB,CAA0BC,IAA1B,GAAiCC,MAAtC,CAA8C,CAC5Cf,KAAK,CAACgB,KAAN,CAAY,0BAAZ,EACA,OACD,CAED,GAAMC,CAAAA,MAAM,CAAG,CACbC,QAAQ,CAAET,QAAQ,CAACG,OAAT,CAAiBC,KADd,CAEbM,QAAQ,CAAET,WAAW,CAACE,OAAZ,CAAoBC,KAFjB,CAAf,CAKAZ,KAAK,CACFmB,IADH,CACQlB,GAAG,CAAG,YADd,CAC4Be,MAD5B,CACoCd,kBADpC,EAEGkB,IAFH,0FAEQ,iBAAOC,GAAP,uHACAA,GAAG,CAACC,IAAJ,CAASC,IAAT,GAAkB,GADlB,gDAEIC,CAAAA,YAAY,CAACC,OAAb,CACJ,iBADI,CAEJC,IAAI,CAACC,SAAL,CAAeN,GAAG,CAACC,IAAJ,CAASM,IAAxB,CAFI,CAFJ,QAMF,GAAIJ,YAAY,CAACK,OAAb,CAAqB,UAArB,IAAqC,IAAzC,CAA+C,CAC7CL,YAAY,CAACM,UAAb,CAAwB,UAAxB,EACD,CACDvB,aAAa,CAAC,IAAD,CAAb,CACAF,OAAO,CAAC0B,IAAR,CAAa,CAAA3B,KAAK,OAAL,EAAAA,KAAK,SAAL,QAAAA,KAAK,CAAE4B,IAAP,GAAe,GAA5B,EAVE,OAYJ,GAAIX,GAAG,CAACC,IAAJ,CAASC,IAAT,GAAkB,GAAtB,CAA2B,CACzBxB,KAAK,CAACgB,KAAN,CAAYM,GAAG,CAACC,IAAJ,CAASW,OAArB,EACD,CAdG,sDAFR,gEAkBGC,KAlBH,CAkBS,SAACC,GAAD,CAAS,CACdC,OAAO,CAACC,GAAR,CAAY,YAAZ,CAA0BF,GAA1B,EACAC,OAAO,CAACC,GAAR,CAAY,KAAZ,CAAmBF,GAAG,CAACG,QAAvB,EACA,GAAIH,GAAG,CAACG,QAAJ,CAAaf,IAAb,GAAsB,GAA1B,CAA+B,CAC7BxB,KAAK,CAACgB,KAAN,CAAYoB,GAAG,CAACG,QAAJ,CAAahB,IAAb,CAAkBW,OAA9B,EACD,CACF,CAxBH,EAyBD,CAxCD,CA0CA,GAAMM,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,EAAM,CAC/B,mBACE,aAAK,SAAS,CAAC,WAAf,wBACE,UACE,SAAS,CAAEhD,UAAU,CACnB,+DADmB,CADvB,qBADF,cAQE,MAAC,IAAD,EACE,EAAE,CAAE,CACFiD,QAAQ,CAAE,SADR,CAEFpC,KAAK,CAAE,CACL4B,IAAI,CAAE,CAAA5B,KAAK,OAAL,EAAAA,KAAK,SAAL,QAAAA,KAAK,CAAE4B,IAAP,GAAe,GADhB,CAFL,CADN,CAOE,SAAS,CAAEzC,UAAU,CAAC,yCAAD,CAPvB,oCAUE,cAAM,SAAS,CAAEA,UAAU,CAAC,eAAD,CAA3B,WACG,GADH,uBAVF,GARF,cAwBE,aAAK,SAAS,CAAC,YAAf,wBACE,YAAK,SAAS,CAAC,SAAf,uBACE,cACE,SAAS,CAAEA,UAAU,CAAC,OAAD,CAAUO,MAAM,CAAC2C,WAAjB,CADvB,CAEE,IAAI,CAAC,MAFP,CAGE,WAAW,CAAC,cAHd,CAIE,QAAQ,KAJV,CAKE,GAAG,CAAEjC,QALP,EADF,EADF,cAWE,YAAK,SAAS,CAAC,SAAf,uBACE,cACE,SAAS,CAAEjB,UAAU,CAAC,YAAD,CAAeO,MAAM,CAAC2C,WAAtB,CADvB,CAEE,IAAI,CAAC,UAFP,CAGE,WAAW,CAAC,UAHd,CAIE,QAAQ,KAJV,CAKE,GAAG,CAAEhC,WALP,EADF,EAXF,cAqBE,YAAK,SAAS,CAAC,SAAf,uBACE,eAAO,SAAS,CAAC,0BAAjB,wBACE,cAAO,IAAI,CAAC,UAAZ,EADF,cAEE,aAAM,SAAS,CAAC,gBAAhB,+BAFF,GADF,EArBF,GAxBF,cAqDE,YAAK,SAAS,CAAC,wBAAf,uBACE,eACE,OAAO,CAAE,yBAAMC,CAAAA,sBAAsB,EAA5B,EADX,CAEE,SAAS,CAAEnB,UAAU,CAACO,MAAM,CAAC4C,SAAR,CAAmB,cAAnB,CAFvB,qBADF,EArDF,cA8DE,aAAK,SAAS,CAAEnD,UAAU,CAACO,MAAM,CAAC6C,cAAR,CAA1B,wBACE,YAAK,SAAS,CAAEpD,UAAU,CAACO,MAAM,CAAC8C,WAAR,CAA1B,EADF,cAEE,UAAG,SAAS,CAAErD,UAAU,CAAC,yBAAD,CAAxB,6BAFF,cAKE,YAAK,SAAS,CAAEA,UAAU,CAACO,MAAM,CAAC8C,WAAR,CAA1B,EALF,GA9DF,cAsEE,aAAK,SAAS,CAAErD,UAAU,CAAC,MAAD,CAASO,MAAM,CAAC+C,kBAAhB,CAA1B,wBACE,KAAC,eAAD,EAAiB,IAAI,CAAE,EAAvB,CAA2B,KAAK,CAAC,MAAjC,EADF,cAEE,KAAC,cAAD,EAAgB,IAAI,CAAE,EAAtB,CAA0B,KAAK,CAAC,MAAhC,EAFF,cAGE,KAAC,cAAD,EAAgB,IAAI,CAAE,EAAtB,CAA0B,KAAK,CAAC,MAAhC,EAHF,cAIE,KAAC,gBAAD,EAAkB,IAAI,CAAE,EAAxB,CAA4B,KAAK,CAAC,MAAlC,EAJF,GAtEF,GADF,CA+ED,CAhFD,CAkFA,GAAIvC,UAAJ,CAAgB,CACd,mBAAO,KAAC,QAAD,EAAU,EAAE,CAAE,CAAAF,KAAK,OAAL,EAAAA,KAAK,SAAL,QAAAA,KAAK,CAAE4B,IAAP,GAAe,GAA7B,EAAP,CACD,CAED,mBACE,YAAK,SAAS,CAAEzC,UAAU,CAAC,SAAD,CAAYO,MAAM,CAACgD,YAAnB,CAA1B,uBACE,YACE,SAAS,CAAEvD,UAAU,CAAC,oBAAD,CAAuBO,MAAM,CAACiD,iBAA9B,CADvB,uBAGE,aAAK,SAAS,CAAExD,UAAU,CAAC,eAAD,CAAkBO,MAAM,CAACkD,YAAzB,CAA1B,wBACE,YAAK,SAAS,CAAEzD,UAAU,CAAC,YAAD,CAAeO,MAAM,CAACmD,gBAAtB,CAA1B,uBACE,KAAC,kBAAD,IADF,EADF,cAIE,YACE,SAAS,CAAE1D,UAAU,CACnB,sBADmB,CAEnBO,MAAM,CAACoD,gBAFY,CADvB,uBAME,KAAC,sBAAD,IANF,EAJF,GAHF,EADF,EADF,CAqBD,CA7JD,CA+JA,cAAe/C,CAAAA,KAAf","sourcesContent":["import React, { useContext, useRef } from \"react\";\nimport { Link, Redirect, useHistory, useLocation } from \"react-router-dom\";\nimport classnames from \"classnames\";\nimport {\n  AiOutlineGoogle,\n  AiFillFacebook,\n  AiFillLinkedin,\n  AiOutlineTwitter,\n} from \"react-icons/ai\";\nimport { Context } from \"../data/context\";\nimport CartRightSideComponent from \"../components/CartRightSideComponent\";\nimport styles from \"../css/Login.module.css\";\nimport { toast } from \"react-toastify\";\nimport axios from \"axios\";\nimport api from \"../config/api\";\nimport headerWithoutToken from \"../config/headerWithoutToken\";\n\nconst Login = () => {\n  const { state } = useLocation();\n  const history = useHistory();\n\n  const { isLoggedIn, setIsLoggedIn } = useContext(Context);\n  const phoneRef = useRef(null);\n  const passwordRef = useRef(null);\n\n  const handleSignInBtnClicked = () => {\n    if (!phoneRef.current.value.trim().length) {\n      toast.error(\"Phone Number Cannot be empty\");\n      return;\n    }\n    if (!passwordRef.current.value.trim().length) {\n      toast.error(\"Password Cannot be empty\");\n      return;\n    }\n\n    const values = {\n      username: phoneRef.current.value,\n      password: passwordRef.current.value,\n    };\n\n    axios\n      .post(api + \"user/login\", values, headerWithoutToken)\n      .then(async (res) => {\n        if (res.data.code === 200) {\n          await localStorage.setItem(\n            \"turfUserDetails\",\n            JSON.stringify(res.data.body)\n          );\n          if (localStorage.getItem(\"turfCart\") !== null) {\n            localStorage.removeItem(\"turfCart\");\n          }\n          setIsLoggedIn(true);\n          history.push(state?.from || \"/\");\n        }\n        if (res.data.code === 404) {\n          toast.error(res.data.message);\n        }\n      })\n      .catch((err) => {\n        console.log(\"error here\", err);\n        console.log(\"res\", err.response);\n        if (err.response.code === 500) {\n          toast.error(err.response.data.message);\n        }\n      });\n  };\n\n  const LoginSideComponent = () => {\n    return (\n      <div className=\"my-5 mx-3\">\n        <p\n          className={classnames(\n            \"subtitle is-1 is-capitalized has-text-white has-text-centered\"\n          )}\n        >\n          Sign in\n        </p>\n        <Link\n          to={{\n            pathname: \"/signup\",\n            state: {\n              from: state?.from || \"/\",\n            },\n          }}\n          className={classnames(\"subtitle is-capitalized has-text-white \")}\n        >\n          New User?\n          <span className={classnames(\"has-text-info\")}>\n            {\" \"}\n            Create An Account\n          </span>\n        </Link>\n\n        <div className=\"field my-3\">\n          <div className=\"control\">\n            <input\n              className={classnames(\"input\", styles.LoginInputs)}\n              type=\"text\"\n              placeholder=\"Phone Number\"\n              required\n              ref={phoneRef}\n            />\n          </div>\n\n          <div className=\"control\">\n            <input\n              className={classnames(\"input mt-3\", styles.LoginInputs)}\n              type=\"password\"\n              placeholder=\"Password\"\n              required\n              ref={passwordRef}\n            />\n          </div>\n\n          <div className=\"control\">\n            <label className=\"checkbox has-text-white \">\n              <input type=\"checkbox\" />\n              <span className=\"is-size-5 ml-3\">Keep me signed in</span>\n            </label>\n          </div>\n        </div>\n\n        <div className=\"has-text-centered my-6\">\n          <button\n            onClick={() => handleSignInBtnClicked()}\n            className={classnames(styles.signInBtn, \"is-clickable\")}\n          >\n            Sign In\n          </button>\n        </div>\n\n        <div className={classnames(styles.dividerWrapper)}>\n          <div className={classnames(styles.dividerLine)}></div>\n          <p className={classnames(\"has-text-white subtitle\")}>\n            Or Sign In With\n          </p>\n          <div className={classnames(styles.dividerLine)}></div>\n        </div>\n\n        <div className={classnames(\"my-6\", styles.socialIconsWrapper)}>\n          <AiOutlineGoogle size={40} color=\"#FFF\" />\n          <AiFillFacebook size={40} color=\"#FFF\" />\n          <AiFillLinkedin size={40} color=\"#FFF\" />\n          <AiOutlineTwitter size={40} color=\"#FFF\" />\n        </div>\n      </div>\n    );\n  };\n\n  if (isLoggedIn) {\n    return <Redirect to={state?.from || \"/\"} />;\n  }\n\n  return (\n    <div className={classnames(\"section\", styles.LoginWrapper)}>\n      <div\n        className={classnames(\"container is-fluid\", styles.overRideContainer)}\n      >\n        <div className={classnames(\" columns mt-5\", styles.LoginColumns)}>\n          <div className={classnames(\"column box\", styles.LoginLeftWrapper)}>\n            <LoginSideComponent />\n          </div>\n          <div\n            className={classnames(\n              \"column is-two-thirds\",\n              styles.LoginCartWrapper\n            )}\n          >\n            <CartRightSideComponent />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}