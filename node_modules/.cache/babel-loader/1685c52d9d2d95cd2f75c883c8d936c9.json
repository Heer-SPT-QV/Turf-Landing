{"ast":null,"code":"import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/var/www/turf2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/var/www/turf2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/var/www/turf2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState}from\"react\";import axios from\"axios\";import{useHistory}from\"react-router-dom\";import headerWithToken from\"../config/headerWithToken\";import{Context}from\"../data/context\";import api from\"../config/api\";import{ListData}from\"../utils/ListData\";import styles from\"../css/Payment.module.css\";var PaymentGateway=function PaymentGateway(){var _useContext=useContext(Context),cartData=_useContext.cartData,totalAmount=_useContext.totalAmount,isLoggedIn=_useContext.isLoggedIn;var allData=ListData(cartData);var history=useHistory();// eslint-disable-next-line no-unused-vars\nvar _useState=useState(null),_useState2=_slicedToArray(_useState,2),responce=_useState2[0],setResponce=_useState2[1];var options={key:\"rzp_test_ZcSb49CvQ0NZhe\",// amount: totalAmount * 100, //  = INR 1\namount:1000,name:\"Turf Booking\",description:\"Welcome to Rebounce You can pay with RazorPay and book your turf Ground\",image:\"https://cdn.razorpay.com/logos/7K3b6d18wHwKzL_medium.png\",handler:function handler(response){console.log(response.razorpay_payment_id);setResponce(response.razorpay_payment_id);var data=JSON.parse(localStorage.getItem(\"turfUserDetails\"));var body={userId:data.user.phoneNumber,timeSlots:allData};console.log(body);axios.post(api+\"common/order\",body,headerWithToken).then(function(res){console.log(res);if(res.data.body.message===\"slot with start time 11:30 on date 2021-01-10 is already booked.\"){//\n}if(res.data.body.message===\"\"||res.data.body.message===null){history.push(\"/payment-success\");}}).catch(function(err){console.log(err.response);});},prefill:{name:\"Neha\",contact:\"9999999999\",email:\"demo@demo.com\"},notes:{address:\"some address\"},theme:{color:\"blue\",hide_topbar:false}};var openPayModal=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var rzp1;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:rzp1=new window.Razorpay(options);_context.next=3;return rzp1.open();case 3:case\"end\":return _context.stop();}}},_callee);}));return function openPayModal(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:styles.PaymentWrapper,children:totalAmount>0?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"figure\",{className:\"image is-clickable\",style:{width:\"250px\"},onClick:function onClick(){if(isLoggedIn){openPayModal();}else{history.push(\"/login\");}},children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-success p-5\",children:/*#__PURE__*/_jsx(\"img\",{src:\"https://razorpay.com/assets/razorpay-logo-white.svg\",alt:\"Razor Pay\"})})})}):/*#__PURE__*/_jsx(\"span\",{})});};export default PaymentGateway;","map":{"version":3,"sources":["/var/www/turf2/src/components/PaymentGateway.jsx"],"names":["React","useContext","useState","axios","useHistory","headerWithToken","Context","api","ListData","styles","PaymentGateway","cartData","totalAmount","isLoggedIn","allData","history","responce","setResponce","options","key","amount","name","description","image","handler","response","console","log","razorpay_payment_id","data","JSON","parse","localStorage","getItem","body","userId","user","phoneNumber","timeSlots","post","then","res","message","push","catch","err","prefill","contact","email","notes","address","theme","color","hide_topbar","openPayModal","rzp1","window","Razorpay","open","PaymentWrapper","width"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from \"react\";\nimport axios from \"axios\";\nimport { useHistory } from \"react-router-dom\";\nimport headerWithToken from \"../config/headerWithToken\";\nimport { Context } from \"../data/context\";\nimport api from \"../config/api\";\nimport { ListData } from \"../utils/ListData\";\nimport styles from \"../css/Payment.module.css\";\n\nconst PaymentGateway = () => {\n  const { cartData, totalAmount, isLoggedIn } = useContext(Context);\n  const allData = ListData(cartData);\n\n  const history = useHistory();\n\n  // eslint-disable-next-line no-unused-vars\n  const [responce, setResponce] = useState(null);\n\n  const options = {\n    key: \"rzp_test_ZcSb49CvQ0NZhe\",\n\n    // amount: totalAmount * 100, //  = INR 1\n    amount: 1000,\n    name: \"Turf Booking\",\n    description:\n      \"Welcome to Rebounce You can pay with RazorPay and book your turf Ground\",\n    image: \"https://cdn.razorpay.com/logos/7K3b6d18wHwKzL_medium.png\",\n    handler: function (response) {\n      console.log(response.razorpay_payment_id);\n      setResponce(response.razorpay_payment_id);\n      const data = JSON.parse(localStorage.getItem(\"turfUserDetails\"));\n      const body = {\n        userId: data.user.phoneNumber,\n        timeSlots: allData,\n      };\n      console.log(body);\n      axios\n        .post(api + \"common/order\", body, headerWithToken)\n        .then((res) => {\n          console.log(res);\n          if (\n            res.data.body.message ===\n            \"slot with start time 11:30 on date 2021-01-10 is already booked.\"\n          ) {\n            //\n          }\n          if (res.data.body.message === \"\" || res.data.body.message === null) {\n            history.push(\"/payment-success\");\n          }\n        })\n        .catch((err) => {\n          console.log(err.response);\n        });\n    },\n    prefill: {\n      name: \"Neha\",\n      contact: \"9999999999\",\n      email: \"demo@demo.com\",\n    },\n    notes: {\n      address: \"some address\",\n    },\n    theme: {\n      color: \"blue\",\n      hide_topbar: false,\n    },\n  };\n\n  const openPayModal = async () => {\n    var rzp1 = new window.Razorpay(options);\n    await rzp1.open();\n  };\n\n  return (\n    <div className={styles.PaymentWrapper}>\n      {totalAmount > 0 ? (\n        <div>\n          <figure\n            className=\"image is-clickable\"\n            style={{ width: \"250px\" }}\n            onClick={() => {\n              if (isLoggedIn) {\n                openPayModal();\n              } else {\n                history.push(\"/login\");\n              }\n            }}\n          >\n            <button className=\"button is-success p-5\">\n              <img\n                src=\"https://razorpay.com/assets/razorpay-logo-white.svg\"\n                alt=\"Razor Pay\"\n              />\n            </button>\n          </figure>\n        </div>\n      ) : (\n        <span></span>\n      )}\n    </div>\n  );\n};\n\nexport default PaymentGateway;\n"]},"metadata":{},"sourceType":"module"}