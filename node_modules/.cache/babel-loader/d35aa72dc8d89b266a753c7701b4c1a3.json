{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/sptdev/Desktop/reactjs/turf2/src/pages/Profile.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useEffect, useState, useContext, useRef } from \"react\";\nimport classnames from \"classnames\";\nimport { Context } from \"../data/context\";\nimport styles from \"../css/Profile.module.css\";\nimport { toast } from \"react-toastify\";\nimport axios from \"axios\";\nimport api from \"../config/api\";\nimport headerWithToken from \"../config/headerWithToken\";\nimport BookingSummary from \"../components/BookingSummary\";\n\nconst Profile = () => {\n  _s();\n\n  const [userData, setUserData] = useState(null);\n  const [isModalOpen, setisModalOpen] = useState(false);\n  const {\n    setIsLoggedIn\n  } = useContext(Context);\n  const nameRef = useRef(null);\n  const emailRef = useRef(null);\n  const DOBRef = useRef(null);\n  const fetchUserData = useCallback(async () => {\n    var data = await JSON.parse(localStorage.getItem(\"turfUserDetails\"));\n    setUserData(data.user);\n  }, []);\n\n  const handleSaveProfileChanges = () => {\n    if (!nameRef.current.value.trim().length) {\n      toast.error(\"Name Cannot be empty\");\n      return;\n    }\n\n    if (!emailRef.current.value.trim().length) {\n      toast.error(\"Email Cannot be empty\");\n      return;\n    }\n\n    if (!DOBRef.current.value.trim().length) {\n      toast.error(\"Date of Birth Cannot be empty\");\n      return;\n    }\n\n    const data = {\n      name: nameRef.current.value,\n      emailId: emailRef.current.value,\n      dateOfBirth: DOBRef.current.value,\n      phoneNumber: userData.phoneNumber\n    };\n    axios.put(api + \"user/update-profile/\", data, headerWithToken).then(async res => {\n      if (res.data.success) {\n        toast(\"Profile Changes saved successfully\");\n        await localStorage.removeItem(\"turfUserDetails\");\n        await localStorage.setItem(\"turfUserDetails\", JSON.stringify({\n          user: res.data.body\n        }));\n        setUserData(res.data.body);\n        setisModalOpen(false);\n      }\n    }).catch(err => {\n      console.log(err.message);\n      toast.error(err.message);\n    });\n  };\n\n  useEffect(() => {\n    fetchUserData();\n  }, [fetchUserData]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classnames(\"section\", styles.ProfileWrapper),\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classnames(\"container is-fluid\", styles.overRideContainer),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classnames(\" columns mt-5\"),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: classnames(\"column box has-text-centered\", styles.ProfileLeftColumn),\n          children: [/*#__PURE__*/_jsxDEV(\"figure\", {\n            className: classnames(styles.ProfileImageWrapper, \"my-5\"),\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"https://placeimg.com/640/480/any\",\n              alt: \"Profile \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: classnames(\"subtitle is-2 is-uppercase has-text-white\"),\n            children: userData === null || userData === void 0 ? void 0 : userData.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: classnames(\"subtitle is-4  has-text-white\"),\n            children: userData === null || userData === void 0 ? void 0 : userData.phoneNumber\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: classnames(\"subtitle is-4  has-text-white\"),\n            children: userData === null || userData === void 0 ? void 0 : userData.emailId\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classnames(\"is-flex-direction-row\"),\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                setisModalOpen(true);\n              },\n              className: \"button is-link mx-3\",\n              children: \"Edit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: async () => {\n                await localStorage.removeItem(\"turfUserDetails\");\n                setIsLoggedIn(false);\n              },\n              className: \"button is-danger\",\n              children: \"Logout\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classnames(\"column is-two-thirds\", styles.SecondColumns),\n          children: /*#__PURE__*/_jsxDEV(BookingSummary, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classnames(\"modal\", isModalOpen ? \"is-active\" : \"\"),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-background\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"header\", {\n            className: \"modal-card-head\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"modal-card-title\",\n              children: \"Edit Profile\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setisModalOpen(false),\n              className: \"delete\",\n              \"aria-label\": \"close\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n            className: \"modal-card-body\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"field\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"label\",\n                children: \"Full Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"control\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  ref: nameRef,\n                  className: \"input\",\n                  type: \"text\",\n                  placeholder: \"Eg: Joe Deo\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 150,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 149,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"field\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"label\",\n                children: \"Email\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 160,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                ref: emailRef,\n                className: \"input\",\n                type: \"email\",\n                placeholder: \"Email\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 161,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"field\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"label\",\n                children: \"Date Of Birth\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 170,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                ref: DOBRef,\n                className: \"input\",\n                type: \"date\",\n                placeholder: \"Date of Birth\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 171,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n            className: \"modal-card-foot\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleSaveProfileChanges(),\n              className: \"button is-success\",\n              children: \"Save changes\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Profile, \"Krp+jlxFdUcvVNRFYInyxuccTG8=\");\n\n_c = Profile;\nexport default Profile;\n\nvar _c;\n\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"sources":["/Users/sptdev/Desktop/reactjs/turf2/src/pages/Profile.jsx"],"names":["React","useCallback","useEffect","useState","useContext","useRef","classnames","Context","styles","toast","axios","api","headerWithToken","BookingSummary","Profile","userData","setUserData","isModalOpen","setisModalOpen","setIsLoggedIn","nameRef","emailRef","DOBRef","fetchUserData","data","JSON","parse","localStorage","getItem","user","handleSaveProfileChanges","current","value","trim","length","error","name","emailId","dateOfBirth","phoneNumber","put","then","res","success","removeItem","setItem","stringify","body","catch","err","console","log","message","ProfileWrapper","overRideContainer","ProfileLeftColumn","ProfileImageWrapper","SecondColumns"],"mappings":"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","sourcesContent":["import React, {\n  useCallback,\n  useEffect,\n  useState,\n  useContext,\n  useRef,\n} from \"react\";\nimport classnames from \"classnames\";\nimport { Context } from \"../data/context\";\nimport styles from \"../css/Profile.module.css\";\nimport { toast } from \"react-toastify\";\nimport axios from \"axios\";\nimport api from \"../config/api\";\nimport headerWithToken from \"../config/headerWithToken\";\nimport BookingSummary from \"../components/BookingSummary\";\n\nconst Profile = () => {\n  const [userData, setUserData] = useState(null);\n  const [isModalOpen, setisModalOpen] = useState(false);\n\n  const { setIsLoggedIn } = useContext(Context);\n\n  const nameRef = useRef(null);\n  const emailRef = useRef(null);\n  const DOBRef = useRef(null);\n\n  const fetchUserData = useCallback(async () => {\n    var data = await JSON.parse(localStorage.getItem(\"turfUserDetails\"));\n    setUserData(data.user);\n  }, []);\n\n  const handleSaveProfileChanges = () => {\n    if (!nameRef.current.value.trim().length) {\n      toast.error(\"Name Cannot be empty\");\n      return;\n    }\n    if (!emailRef.current.value.trim().length) {\n      toast.error(\"Email Cannot be empty\");\n      return;\n    }\n    if (!DOBRef.current.value.trim().length) {\n      toast.error(\"Date of Birth Cannot be empty\");\n      return;\n    }\n\n    const data = {\n      name: nameRef.current.value,\n      emailId: emailRef.current.value,\n      dateOfBirth: DOBRef.current.value,\n      phoneNumber: userData.phoneNumber,\n    };\n\n    axios\n      .put(api + \"user/update-profile/\", data, headerWithToken)\n      .then(async (res) => {\n        if (res.data.success) {\n          toast(\"Profile Changes saved successfully\");\n          await localStorage.removeItem(\"turfUserDetails\");\n          await localStorage.setItem(\n            \"turfUserDetails\",\n            JSON.stringify({ user: res.data.body })\n          );\n\n          setUserData(res.data.body);\n          setisModalOpen(false);\n        }\n      })\n      .catch((err) => {\n        console.log(err.message);\n        toast.error(err.message);\n      });\n  };\n\n  useEffect(() => {\n    fetchUserData();\n  }, [fetchUserData]);\n\n  return (\n    <div className={classnames(\"section\", styles.ProfileWrapper)}>\n      <div\n        className={classnames(\"container is-fluid\", styles.overRideContainer)}\n      >\n        <div className={classnames(\" columns mt-5\")}>\n          <div\n            className={classnames(\n              \"column box has-text-centered\",\n              styles.ProfileLeftColumn\n            )}\n          >\n            <figure className={classnames(styles.ProfileImageWrapper, \"my-5\")}>\n              <img src=\"https://placeimg.com/640/480/any\" alt=\"Profile \" />\n            </figure>\n\n            <p\n              className={classnames(\n                \"subtitle is-2 is-uppercase has-text-white\"\n              )}\n            >\n              {userData?.name}\n            </p>\n            <p className={classnames(\"subtitle is-4  has-text-white\")}>\n              {userData?.phoneNumber}\n            </p>\n            <p className={classnames(\"subtitle is-4  has-text-white\")}>\n              {userData?.emailId}\n            </p>\n\n            <div className={classnames(\"is-flex-direction-row\")}>\n              <button\n                onClick={() => {\n                  setisModalOpen(true);\n                }}\n                className=\"button is-link mx-3\"\n              >\n                Edit\n              </button>\n              <button\n                onClick={async () => {\n                  await localStorage.removeItem(\"turfUserDetails\");\n                  setIsLoggedIn(false);\n                }}\n                className=\"button is-danger\"\n              >\n                Logout\n              </button>\n            </div>\n          </div>\n          <div\n            className={classnames(\"column is-two-thirds\", styles.SecondColumns)}\n          >\n            <BookingSummary />\n          </div>\n        </div>\n\n        <div className={classnames(\"modal\", isModalOpen ? \"is-active\" : \"\")}>\n          <div className=\"modal-background\"></div>\n          <div className=\"modal-card\">\n            <header className=\"modal-card-head\">\n              <p className=\"modal-card-title\">Edit Profile</p>\n              <button\n                onClick={() => setisModalOpen(false)}\n                className=\"delete\"\n                aria-label=\"close\"\n              ></button>\n            </header>\n            <section className=\"modal-card-body\">\n              <div className=\"field\">\n                <label className=\"label\">Full Name</label>\n                <div className=\"control\">\n                  <input\n                    ref={nameRef}\n                    className=\"input\"\n                    type=\"text\"\n                    placeholder=\"Eg: Joe Deo\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"field\">\n                <label className=\"label\">Email</label>\n                <input\n                  ref={emailRef}\n                  className=\"input\"\n                  type=\"email\"\n                  placeholder=\"Email\"\n                />\n              </div>\n\n              <div className=\"field\">\n                <label className=\"label\">Date Of Birth</label>\n                <input\n                  ref={DOBRef}\n                  className=\"input\"\n                  type=\"date\"\n                  placeholder=\"Date of Birth\"\n                />\n              </div>\n            </section>\n            <footer className=\"modal-card-foot\">\n              <button\n                onClick={() => handleSaveProfileChanges()}\n                className=\"button is-success\"\n              >\n                Save changes\n              </button>\n            </footer>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Profile;\n"]},"metadata":{},"sourceType":"module"}