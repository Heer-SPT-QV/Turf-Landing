{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/sptdev/Desktop/reactjs/turf2/src/components/CartRightSideComponent.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useCallback, useContext, useEffect } from \"react\";\nimport classnames from \"classnames\";\nimport { Context } from \"../data/context\";\nimport styles from \"../css/Cart.module.css\";\nimport CartElement from \"./CartElement\";\nimport { filterData } from \"../utils/filterData\";\nimport axios from \"axios\";\nimport api from \"../config/api\";\nimport headerWithoutToken from \"../config/headerWithoutToken\";\nimport { Link } from \"react-router-dom\";\n\nconst CartRightSideComponent = () => {\n  _s();\n\n  const {\n    setCartId,\n    setCartData,\n    cartData,\n    setPhoneNumber,\n    setTotalAmount,\n    setTotalSlots,\n    setIsCartEmpty,\n    isCartEmpty\n  } = useContext(Context);\n  const [dateArray, setDateArray] = useState([]);\n  const handleFetchedData = useCallback(res => {\n    if (res.data.success) {\n      if (res.data.body) {\n        if (res.data.body.selectedSlots.length) {\n          const [sortedData, dateArry] = filterData(res.data.body);\n          setTotalSlots(res.data.body.selectedSlots.length);\n          setCartData(sortedData);\n          console.log(sortedData);\n          setTotalAmount(res.data.body.cartTotal);\n          setDateArray([...dateArry]);\n          setIsCartEmpty(false);\n        } else {\n          setIsCartEmpty(true);\n          setTotalAmount(0);\n          setTotalSlots(0);\n        }\n      } else {\n        setIsCartEmpty(true);\n        setTotalAmount(0);\n        setTotalSlots(0);\n      }\n    }\n  }, [setCartData, setIsCartEmpty, setTotalAmount, setTotalSlots]);\n  const fetchCartData = useCallback(() => {\n    const data = JSON.parse(localStorage.getItem(\"turfUserDetails\"));\n    const cartLocalId = localStorage.getItem(\"turfCart\");\n    setCartId(() => cartLocalId ? cartLocalId : null);\n    setPhoneNumber(() => {\n      var _data$user;\n\n      return (data === null || data === void 0 ? void 0 : (_data$user = data.user) === null || _data$user === void 0 ? void 0 : _data$user.phoneNumber) ? data.user.phoneNumber : null;\n    }); // if (data === null && cartLocalId === null) {\n    //   setCartId(null);\n    // } else if (data === null && cartLocalId != null) {\n    //   setCartId(cartLocalId);\n    // } else {\n    //   setPhoneNumber(data.user.phoneNumber);\n    // }\n\n    if (data === null) {\n      axios.get(api + \"user/cart?cartId=\" + cartLocalId, headerWithoutToken).then(res => {\n        handleFetchedData(res);\n      }).catch(err => {\n        console.log(err);\n      });\n    } else {\n      axios.get(api + \"user/cart?phoneNumber=\" + data.user.phoneNumber, headerWithoutToken).then(res => {\n        handleFetchedData(res);\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n  }, [handleFetchedData, setCartId, setPhoneNumber]);\n  useEffect(() => {\n    fetchCartData();\n  }, [fetchCartData]);\n\n  if (isCartEmpty) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classnames(\"container\", styles.isCartEmptyWrapper),\n      children: /*#__PURE__*/_jsxDEV(\"article\", {\n        className: \"message is-success is-large\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"message-header\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Message\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"message-body\",\n          children: \"Your Cart is Empty\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/\",\n          className: \"button is-success m-5\",\n          children: \"Book Slots\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: dateArray.map((item, index) => {\n      const turf01 = cartData[item].turf01 || [];\n      const turf02 = cartData[item].turf02 || [];\n      const turf03 = cartData[item].turf03 || [];\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classnames(\"box\", styles.dateCardWrapper),\n        children: [/*#__PURE__*/_jsxDEV(\"header\", {\n          className: \"card-header\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"card-header-title has-text-white\",\n            children: item\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classnames(\"card-content\", styles.allGroundsWrapper),\n          children: [turf01.length ? /*#__PURE__*/_jsxDEV(CartElement, {\n            data: turf01,\n            label: \"Ground 1\",\n            reloadData: fetchCartData\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 17\n          }, this), turf02.length ? /*#__PURE__*/_jsxDEV(CartElement, {\n            data: turf02,\n            label: \"Ground 2\",\n            reloadData: fetchCartData\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 17\n          }, this), turf03.length ? /*#__PURE__*/_jsxDEV(CartElement, {\n            data: turf03,\n            label: \"Ground 3\",\n            reloadData: fetchCartData\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 13\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 11\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 117,\n    columnNumber: 5\n  }, this);\n};\n\n_s(CartRightSideComponent, \"4g2K5VolIcVShBpQhmwmBRXdaXI=\");\n\n_c = CartRightSideComponent;\nexport default CartRightSideComponent;\n\nvar _c;\n\n$RefreshReg$(_c, \"CartRightSideComponent\");","map":{"version":3,"sources":["/Users/sptdev/Desktop/reactjs/turf2/src/components/CartRightSideComponent.jsx"],"names":["React","useState","useCallback","useContext","useEffect","classnames","Context","styles","CartElement","filterData","axios","api","headerWithoutToken","Link","CartRightSideComponent","setCartId","setCartData","cartData","setPhoneNumber","setTotalAmount","setTotalSlots","setIsCartEmpty","isCartEmpty","dateArray","setDateArray","handleFetchedData","res","data","success","body","selectedSlots","length","sortedData","dateArry","console","log","cartTotal","fetchCartData","JSON","parse","localStorage","getItem","cartLocalId","user","phoneNumber","get","then","catch","err","isCartEmptyWrapper","map","item","index","turf01","turf02","turf03","dateCardWrapper","allGroundsWrapper"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,WAA1B,EAAuCC,UAAvC,EAAmDC,SAAnD,QAAoE,OAApE;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,SAASC,OAAT,QAAwB,iBAAxB;AACA,OAAOC,MAAP,MAAmB,wBAAnB;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,SAASC,UAAT,QAA2B,qBAA3B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,GAAP,MAAgB,eAAhB;AACA,OAAOC,kBAAP,MAA+B,8BAA/B;AACA,SAASC,IAAT,QAAqB,kBAArB;;AAEA,MAAMC,sBAAsB,GAAG,MAAM;AAAA;;AACnC,QAAM;AACJC,IAAAA,SADI;AAEJC,IAAAA,WAFI;AAGJC,IAAAA,QAHI;AAIJC,IAAAA,cAJI;AAKJC,IAAAA,cALI;AAMJC,IAAAA,aANI;AAOJC,IAAAA,cAPI;AAQJC,IAAAA;AARI,MAUFnB,UAAU,CAACG,OAAD,CAVd;AAYA,QAAM,CAACiB,SAAD,EAAYC,YAAZ,IAA4BvB,QAAQ,CAAC,EAAD,CAA1C;AAEA,QAAMwB,iBAAiB,GAAGvB,WAAW,CAClCwB,GAAD,IAAS;AACP,QAAIA,GAAG,CAACC,IAAJ,CAASC,OAAb,EAAsB;AACpB,UAAIF,GAAG,CAACC,IAAJ,CAASE,IAAb,EAAmB;AACjB,YAAIH,GAAG,CAACC,IAAJ,CAASE,IAAT,CAAcC,aAAd,CAA4BC,MAAhC,EAAwC;AACtC,gBAAM,CAACC,UAAD,EAAaC,QAAb,IAAyBxB,UAAU,CAACiB,GAAG,CAACC,IAAJ,CAASE,IAAV,CAAzC;AACAT,UAAAA,aAAa,CAACM,GAAG,CAACC,IAAJ,CAASE,IAAT,CAAcC,aAAd,CAA4BC,MAA7B,CAAb;AACAf,UAAAA,WAAW,CAACgB,UAAD,CAAX;AACAE,UAAAA,OAAO,CAACC,GAAR,CAAYH,UAAZ;AACAb,UAAAA,cAAc,CAACO,GAAG,CAACC,IAAJ,CAASE,IAAT,CAAcO,SAAf,CAAd;AACAZ,UAAAA,YAAY,CAAC,CAAC,GAAGS,QAAJ,CAAD,CAAZ;AACAZ,UAAAA,cAAc,CAAC,KAAD,CAAd;AACD,SARD,MAQO;AACLA,UAAAA,cAAc,CAAC,IAAD,CAAd;AACAF,UAAAA,cAAc,CAAC,CAAD,CAAd;AACAC,UAAAA,aAAa,CAAC,CAAD,CAAb;AACD;AACF,OAdD,MAcO;AACLC,QAAAA,cAAc,CAAC,IAAD,CAAd;AACAF,QAAAA,cAAc,CAAC,CAAD,CAAd;AACAC,QAAAA,aAAa,CAAC,CAAD,CAAb;AACD;AACF;AACF,GAvBkC,EAwBnC,CAACJ,WAAD,EAAcK,cAAd,EAA8BF,cAA9B,EAA8CC,aAA9C,CAxBmC,CAArC;AA2BA,QAAMiB,aAAa,GAAGnC,WAAW,CAAC,MAAM;AACtC,UAAMyB,IAAI,GAAGW,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,iBAArB,CAAX,CAAb;AACA,UAAMC,WAAW,GAAGF,YAAY,CAACC,OAAb,CAAqB,UAArB,CAApB;AAEA1B,IAAAA,SAAS,CAAC,MAAO2B,WAAW,GAAGA,WAAH,GAAiB,IAApC,CAAT;AAEAxB,IAAAA,cAAc,CAAC;AAAA;;AAAA,aACb,CAAAS,IAAI,SAAJ,IAAAA,IAAI,WAAJ,0BAAAA,IAAI,CAAEgB,IAAN,0DAAYC,WAAZ,IAA0BjB,IAAI,CAACgB,IAAL,CAAUC,WAApC,GAAkD,IADrC;AAAA,KAAD,CAAd,CANsC,CAUtC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAIjB,IAAI,KAAK,IAAb,EAAmB;AACjBjB,MAAAA,KAAK,CACFmC,GADH,CACOlC,GAAG,GAAG,mBAAN,GAA4B+B,WADnC,EACgD9B,kBADhD,EAEGkC,IAFH,CAESpB,GAAD,IAAS;AACbD,QAAAA,iBAAiB,CAACC,GAAD,CAAjB;AACD,OAJH,EAKGqB,KALH,CAKUC,GAAD,IAAS;AACdd,QAAAA,OAAO,CAACC,GAAR,CAAYa,GAAZ;AACD,OAPH;AAQD,KATD,MASO;AACLtC,MAAAA,KAAK,CACFmC,GADH,CAEIlC,GAAG,GAAG,wBAAN,GAAiCgB,IAAI,CAACgB,IAAL,CAAUC,WAF/C,EAGIhC,kBAHJ,EAKGkC,IALH,CAKSpB,GAAD,IAAS;AACbD,QAAAA,iBAAiB,CAACC,GAAD,CAAjB;AACD,OAPH,EAQGqB,KARH,CAQUC,GAAD,IAAS;AACdd,QAAAA,OAAO,CAACC,GAAR,CAAYa,GAAZ;AACD,OAVH;AAWD;AACF,GAxCgC,EAwC9B,CAACvB,iBAAD,EAAoBV,SAApB,EAA+BG,cAA/B,CAxC8B,CAAjC;AA0CAd,EAAAA,SAAS,CAAC,MAAM;AACdiC,IAAAA,aAAa;AACd,GAFQ,EAEN,CAACA,aAAD,CAFM,CAAT;;AAIA,MAAIf,WAAJ,EAAiB;AACf,wBACE;AAAK,MAAA,SAAS,EAAEjB,UAAU,CAAC,WAAD,EAAcE,MAAM,CAAC0C,kBAArB,CAA1B;AAAA,6BACE;AAAS,QAAA,SAAS,EAAC,6BAAnB;AAAA,gCACE;AAAK,UAAA,SAAS,EAAC,gBAAf;AAAA,iCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBADF,eAIE;AAAK,UAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAJF,eAKE,QAAC,IAAD;AAAM,UAAA,EAAE,EAAC,GAAT;AAAa,UAAA,SAAS,EAAC,uBAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBALF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YADF;AAaD;;AAED,sBACE;AAAA,cACG1B,SAAS,CAAC2B,GAAV,CAAc,CAACC,IAAD,EAAOC,KAAP,KAAiB;AAC9B,YAAMC,MAAM,GAAGpC,QAAQ,CAACkC,IAAD,CAAR,CAAeE,MAAf,IAAyB,EAAxC;AACA,YAAMC,MAAM,GAAGrC,QAAQ,CAACkC,IAAD,CAAR,CAAeG,MAAf,IAAyB,EAAxC;AACA,YAAMC,MAAM,GAAGtC,QAAQ,CAACkC,IAAD,CAAR,CAAeI,MAAf,IAAyB,EAAxC;AAEA,0BACE;AAEE,QAAA,SAAS,EAAElD,UAAU,CAAC,KAAD,EAAQE,MAAM,CAACiD,eAAf,CAFvB;AAAA,gCAIE;AAAQ,UAAA,SAAS,EAAC,aAAlB;AAAA,iCACE;AAAG,YAAA,SAAS,EAAC,kCAAb;AAAA,sBAAiDL;AAAjD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAJF,eAOE;AACE,UAAA,SAAS,EAAE9C,UAAU,CAAC,cAAD,EAAiBE,MAAM,CAACkD,iBAAxB,CADvB;AAAA,qBAGGJ,MAAM,CAACtB,MAAP,gBACC,QAAC,WAAD;AACE,YAAA,IAAI,EAAEsB,MADR;AAEE,YAAA,KAAK,EAAC,UAFR;AAGE,YAAA,UAAU,EAAEhB;AAHd;AAAA;AAAA;AAAA;AAAA,kBADD,gBAOC;AAAA;AAAA;AAAA;AAAA,kBAVJ,EAYGiB,MAAM,CAACvB,MAAP,gBACC,QAAC,WAAD;AACE,YAAA,IAAI,EAAEuB,MADR;AAEE,YAAA,KAAK,EAAC,UAFR;AAGE,YAAA,UAAU,EAAEjB;AAHd;AAAA;AAAA;AAAA;AAAA,kBADD,gBAOC;AAAA;AAAA;AAAA;AAAA,kBAnBJ,EAsBGkB,MAAM,CAACxB,MAAP,gBACC,QAAC,WAAD;AACE,YAAA,IAAI,EAAEwB,MADR;AAEE,YAAA,KAAK,EAAC,UAFR;AAGE,YAAA,UAAU,EAAElB;AAHd;AAAA;AAAA;AAAA;AAAA,kBADD,gBAOC;AAAA;AAAA;AAAA;AAAA,kBA7BJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBAPF;AAAA,SACOe,KADP;AAAA;AAAA;AAAA;AAAA,cADF;AA0CD,KA/CA;AADH;AAAA;AAAA;AAAA;AAAA,UADF;AAoDD,CA5JD;;GAAMtC,sB;;KAAAA,sB;AA8JN,eAAeA,sBAAf","sourcesContent":["import React, { useState, useCallback, useContext, useEffect } from \"react\";\nimport classnames from \"classnames\";\nimport { Context } from \"../data/context\";\nimport styles from \"../css/Cart.module.css\";\nimport CartElement from \"./CartElement\";\nimport { filterData } from \"../utils/filterData\";\nimport axios from \"axios\";\nimport api from \"../config/api\";\nimport headerWithoutToken from \"../config/headerWithoutToken\";\nimport { Link } from \"react-router-dom\";\n\nconst CartRightSideComponent = () => {\n  const {\n    setCartId,\n    setCartData,\n    cartData,\n    setPhoneNumber,\n    setTotalAmount,\n    setTotalSlots,\n    setIsCartEmpty,\n    isCartEmpty,\n    \n  } = useContext(Context);\n\n  const [dateArray, setDateArray] = useState([]);\n\n  const handleFetchedData = useCallback(\n    (res) => {\n      if (res.data.success) {\n        if (res.data.body) {\n          if (res.data.body.selectedSlots.length) {\n            const [sortedData, dateArry] = filterData(res.data.body);\n            setTotalSlots(res.data.body.selectedSlots.length);\n            setCartData(sortedData);\n            console.log(sortedData);\n            setTotalAmount(res.data.body.cartTotal);\n            setDateArray([...dateArry]);\n            setIsCartEmpty(false);\n          } else {\n            setIsCartEmpty(true);\n            setTotalAmount(0);\n            setTotalSlots(0);\n          }\n        } else {\n          setIsCartEmpty(true);\n          setTotalAmount(0);\n          setTotalSlots(0);\n        }\n      }\n    },\n    [setCartData, setIsCartEmpty, setTotalAmount, setTotalSlots]\n  );\n\n  const fetchCartData = useCallback(() => {\n    const data = JSON.parse(localStorage.getItem(\"turfUserDetails\"));\n    const cartLocalId = localStorage.getItem(\"turfCart\");\n\n    setCartId(() => (cartLocalId ? cartLocalId : null));\n\n    setPhoneNumber(() =>\n      data?.user?.phoneNumber ? data.user.phoneNumber : null\n    );\n\n    // if (data === null && cartLocalId === null) {\n    //   setCartId(null);\n    // } else if (data === null && cartLocalId != null) {\n    //   setCartId(cartLocalId);\n    // } else {\n    //   setPhoneNumber(data.user.phoneNumber);\n    // }\n\n    if (data === null) {\n      axios\n        .get(api + \"user/cart?cartId=\" + cartLocalId, headerWithoutToken)\n        .then((res) => {\n          handleFetchedData(res);\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    } else {\n      axios\n        .get(\n          api + \"user/cart?phoneNumber=\" + data.user.phoneNumber,\n          headerWithoutToken\n        )\n        .then((res) => {\n          handleFetchedData(res);\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    }\n  }, [handleFetchedData, setCartId, setPhoneNumber]);\n\n  useEffect(() => {\n    fetchCartData();\n  }, [fetchCartData]);\n\n  if (isCartEmpty) {\n    return (\n      <div className={classnames(\"container\", styles.isCartEmptyWrapper)}>\n        <article className=\"message is-success is-large\">\n          <div className=\"message-header\">\n            <p>Message</p>\n          </div>\n          <div className=\"message-body\">Your Cart is Empty</div>\n          <Link to=\"/\" className=\"button is-success m-5\">\n            Book Slots\n          </Link>\n        </article>\n      </div>\n    );\n  }\n\n  return (\n    <div>\n      {dateArray.map((item, index) => {\n        const turf01 = cartData[item].turf01 || [];\n        const turf02 = cartData[item].turf02 || [];\n        const turf03 = cartData[item].turf03 || [];\n\n        return (\n          <div\n            key={index}\n            className={classnames(\"box\", styles.dateCardWrapper)}\n          >\n            <header className=\"card-header\">\n              <p className=\"card-header-title has-text-white\">{item}</p>\n            </header>\n            <div\n              className={classnames(\"card-content\", styles.allGroundsWrapper)}\n            >\n              {turf01.length ? (\n                <CartElement\n                  data={turf01}\n                  label=\"Ground 1\"\n                  reloadData={fetchCartData}\n                />\n              ) : (\n                <span></span>\n              )}\n              {turf02.length ? (\n                <CartElement\n                  data={turf02}\n                  label=\"Ground 2\"\n                  reloadData={fetchCartData}\n                />\n              ) : (\n                <span></span>\n              )}\n\n              {turf03.length ? (\n                <CartElement\n                  data={turf03}\n                  label=\"Ground 3\"\n                  reloadData={fetchCartData}\n                />\n              ) : (\n                <span></span>\n              )}\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default CartRightSideComponent;\n"]},"metadata":{},"sourceType":"module"}