{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _toConsumableArray from\"/Users/sptdev/Desktop/reactjs/turf2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/sptdev/Desktop/reactjs/turf2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useCallback,useContext,useEffect}from\"react\";import classnames from\"classnames\";import{Context}from\"../data/context\";import styles from\"../css/Cart.module.css\";import CartElement from\"./CartElement\";import{filterData}from\"../utils/filterData\";import axios from\"axios\";import api from\"../config/api\";import headerWithoutToken from\"../config/headerWithoutToken\";import{Link}from\"react-router-dom\";var CartRightSideComponent=function CartRightSideComponent(){var _useContext=useContext(Context),setCartId=_useContext.setCartId,setCartData=_useContext.setCartData,cartData=_useContext.cartData,setPhoneNumber=_useContext.setPhoneNumber,setTotalAmount=_useContext.setTotalAmount,setTotalSlots=_useContext.setTotalSlots,setIsCartEmpty=_useContext.setIsCartEmpty,isCartEmpty=_useContext.isCartEmpty,setTotalTime=_useContext.setTotalTime;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),dateArray=_useState2[0],setDateArray=_useState2[1];var handleFetchedData=useCallback(function(res){if(res.data.success){if(res.data.body){if(res.data.body.selectedSlots.length){var _filterData=filterData(res.data.body),_filterData2=_slicedToArray(_filterData,2),sortedData=_filterData2[0],dateArry=_filterData2[1];setTotalSlots(res.data.body.selectedSlots.length);setCartData(sortedData);setTotalAmount(res.data.body.cartTotal);setDateArray(_toConsumableArray(dateArry));setIsCartEmpty(false);}else{setIsCartEmpty(true);setTotalAmount(0);setTotalSlots(0);setTotalTime(0);}}else{setIsCartEmpty(true);setTotalAmount(0);setTotalSlots(0);setTotalTime(0);}}},[setCartData,setIsCartEmpty,setTotalAmount,setTotalSlots,setTotalTime]);var fetchCartData=useCallback(function(){var data=JSON.parse(localStorage.getItem(\"turfUserDetails\"));var cartLocalId=localStorage.getItem(\"turfCart\");setCartId(function(){return cartLocalId?cartLocalId:null;});setPhoneNumber(function(){var _data$user;return(data===null||data===void 0?void 0:(_data$user=data.user)===null||_data$user===void 0?void 0:_data$user.phoneNumber)?data.user.phoneNumber:null;});// if (data === null && cartLocalId === null) {\n//   setCartId(null);\n// } else if (data === null && cartLocalId != null) {\n//   setCartId(cartLocalId);\n// } else {\n//   setPhoneNumber(data.user.phoneNumber);\n// }\nif(data===null){axios.get(api+\"user/cart?cartId=\"+cartLocalId,headerWithoutToken).then(function(res){handleFetchedData(res);}).catch(function(err){console.log(err);});}else{axios.get(api+\"user/cart?phoneNumber=\"+data.user.phoneNumber,headerWithoutToken).then(function(res){handleFetchedData(res);}).catch(function(err){console.log(err);});}},[handleFetchedData,setCartId,setPhoneNumber]);useEffect(function(){fetchCartData();},[fetchCartData]);if(isCartEmpty){return/*#__PURE__*/_jsx(\"div\",{className:classnames(\"container\",styles.isCartEmptyWrapper),children:/*#__PURE__*/_jsxs(\"article\",{className:\"message is-success is-large\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"message-header\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Message\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"message-body\",children:\"Your Cart is Empty\"}),/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"button is-success m-5\",children:\"Book Slots\"})]})});}return/*#__PURE__*/_jsx(\"div\",{children:dateArray.map(function(item,index){var _cartData$item,_cartData$item2,_cartData$item3;var turf01=((_cartData$item=cartData[item])===null||_cartData$item===void 0?void 0:_cartData$item.turf01)||[];var turf02=((_cartData$item2=cartData[item])===null||_cartData$item2===void 0?void 0:_cartData$item2.turf02)||[];var turf03=((_cartData$item3=cartData[item])===null||_cartData$item3===void 0?void 0:_cartData$item3.turf03)||[];return/*#__PURE__*/_jsxs(\"div\",{className:classnames(\"box\",styles.dateCardWrapper),children:[/*#__PURE__*/_jsx(\"header\",{className:classnames(styles.cardheader,\"card-header my-3\"),children:/*#__PURE__*/_jsx(\"p\",{className:\"card-header-title has-text-white\",children:item})}),/*#__PURE__*/_jsxs(\"div\",{className:classnames(\"card-content\",styles.allGroundsWrapper),children:[turf01.length?/*#__PURE__*/_jsx(CartElement,{data:turf01,label:\"Ground 1\",reloadData:fetchCartData}):/*#__PURE__*/_jsx(\"span\",{}),turf02.length?/*#__PURE__*/_jsx(CartElement,{data:turf02,label:\"Ground 2\",reloadData:fetchCartData}):/*#__PURE__*/_jsx(\"span\",{}),turf03.length?/*#__PURE__*/_jsx(CartElement,{data:turf03,label:\"Ground 3\",reloadData:fetchCartData}):/*#__PURE__*/_jsx(\"span\",{})]})]},index);})});};export default CartRightSideComponent;","map":{"version":3,"sources":["/Users/sptdev/Desktop/reactjs/turf2/src/components/CartRightSideComponent.jsx"],"names":["React","useState","useCallback","useContext","useEffect","classnames","Context","styles","CartElement","filterData","axios","api","headerWithoutToken","Link","CartRightSideComponent","setCartId","setCartData","cartData","setPhoneNumber","setTotalAmount","setTotalSlots","setIsCartEmpty","isCartEmpty","setTotalTime","dateArray","setDateArray","handleFetchedData","res","data","success","body","selectedSlots","length","sortedData","dateArry","cartTotal","fetchCartData","JSON","parse","localStorage","getItem","cartLocalId","user","phoneNumber","get","then","catch","err","console","log","isCartEmptyWrapper","map","item","index","turf01","turf02","turf03","dateCardWrapper","cardheader","allGroundsWrapper"],"mappings":"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","sourcesContent":["import React, { useState, useCallback, useContext, useEffect } from \"react\";\nimport classnames from \"classnames\";\nimport { Context } from \"../data/context\";\nimport styles from \"../css/Cart.module.css\";\nimport CartElement from \"./CartElement\";\nimport { filterData } from \"../utils/filterData\";\nimport axios from \"axios\";\nimport api from \"../config/api\";\nimport headerWithoutToken from \"../config/headerWithoutToken\";\nimport { Link } from \"react-router-dom\";\n\nconst CartRightSideComponent = () => {\n  const {\n    setCartId,\n    setCartData,\n    cartData,\n    setPhoneNumber,\n    setTotalAmount,\n    setTotalSlots,\n    setIsCartEmpty,\n    isCartEmpty,\n    setTotalTime,\n  } = useContext(Context);\n\n  const [dateArray, setDateArray] = useState([]);\n\n  const handleFetchedData = useCallback(\n    (res) => {\n      if (res.data.success) {\n        if (res.data.body) {\n          if (res.data.body.selectedSlots.length) {\n            const [sortedData, dateArry] = filterData(res.data.body);\n            setTotalSlots(res.data.body.selectedSlots.length);\n            setCartData(sortedData);\n            setTotalAmount(res.data.body.cartTotal);\n            setDateArray([...dateArry]);\n            setIsCartEmpty(false);\n          } else {\n            setIsCartEmpty(true);\n            setTotalAmount(0);\n            setTotalSlots(0);\n            setTotalTime(0);\n          }\n        } else {\n          setIsCartEmpty(true);\n          setTotalAmount(0);\n          setTotalSlots(0);\n          setTotalTime(0);\n        }\n      }\n    },\n    [setCartData, setIsCartEmpty, setTotalAmount, setTotalSlots, setTotalTime]\n  );\n\n  const fetchCartData = useCallback(() => {\n    const data = JSON.parse(localStorage.getItem(\"turfUserDetails\"));\n    const cartLocalId = localStorage.getItem(\"turfCart\");\n\n    setCartId(() => (cartLocalId ? cartLocalId : null));\n\n    setPhoneNumber(() =>\n      data?.user?.phoneNumber ? data.user.phoneNumber : null\n    );\n\n    // if (data === null && cartLocalId === null) {\n    //   setCartId(null);\n    // } else if (data === null && cartLocalId != null) {\n    //   setCartId(cartLocalId);\n    // } else {\n    //   setPhoneNumber(data.user.phoneNumber);\n    // }\n\n    if (data === null) {\n      axios\n        .get(api + \"user/cart?cartId=\" + cartLocalId, headerWithoutToken)\n        .then((res) => {\n          handleFetchedData(res);\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    } else {\n      axios\n        .get(\n          api + \"user/cart?phoneNumber=\" + data.user.phoneNumber,\n          headerWithoutToken\n        )\n        .then((res) => {\n          handleFetchedData(res);\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    }\n  }, [handleFetchedData, setCartId, setPhoneNumber]);\n\n  useEffect(() => {\n    fetchCartData();\n  }, [fetchCartData]);\n\n  if (isCartEmpty) {\n    return (\n      <div className={classnames(\"container\", styles.isCartEmptyWrapper)}>\n        <article className=\"message is-success is-large\">\n          <div className=\"message-header\">\n            <p>Message</p>\n          </div>\n          <div className=\"message-body\">Your Cart is Empty</div>\n          <Link to=\"/\" className=\"button is-success m-5\">\n            Book Slots\n          </Link>\n        </article>\n      </div>\n    );\n  }\n\n  return (\n    <div>\n      {dateArray.map((item, index) => {\n        const turf01 = cartData[item]?.turf01 || [];\n        const turf02 = cartData[item]?.turf02 || [];\n        const turf03 = cartData[item]?.turf03 || [];\n\n        return (\n          <div\n            key={index}\n            className={classnames(\"box\", styles.dateCardWrapper)}\n          >\n            <header\n              className={classnames(styles.cardheader, \"card-header my-3\")}\n            >\n              <p className=\"card-header-title has-text-white\">{item}</p>\n            </header>\n            <div\n              className={classnames(\"card-content\", styles.allGroundsWrapper)}\n            >\n              {turf01.length ? (\n                <CartElement\n                  data={turf01}\n                  label=\"Ground 1\"\n                  reloadData={fetchCartData}\n                />\n              ) : (\n                <span></span>\n              )}\n              {turf02.length ? (\n                <CartElement\n                  data={turf02}\n                  label=\"Ground 2\"\n                  reloadData={fetchCartData}\n                />\n              ) : (\n                <span></span>\n              )}\n\n              {turf03.length ? (\n                <CartElement\n                  data={turf03}\n                  label=\"Ground 3\"\n                  reloadData={fetchCartData}\n                />\n              ) : (\n                <span></span>\n              )}\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default CartRightSideComponent;\n"]},"metadata":{},"sourceType":"module"}