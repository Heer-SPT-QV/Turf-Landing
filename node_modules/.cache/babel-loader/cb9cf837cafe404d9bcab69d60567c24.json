{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/var/www/turf2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/var/www/turf2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useCallback,useContext,useEffect}from\"react\";import{BrowserRouter as Router,Switch,Redirect,Route}from\"react-router-dom\";import Cart from\"../pages/Cart\";import Headers from\"../components/Headers\";import Home from\"../pages/Home\";import Login from\"../pages/Login\";import Profile from\"../pages/Profile\";import ProtectedRoutes from\"./protected.routes\";import{ToastContainer}from\"react-toastify\";import Signup from\"../pages/Signup\";import{Context}from\"../data/context\";import Checkout from\"../pages/Checkout\";import PaymentSuccess from\"../pages/PaymentSuccess\";var Routes=function Routes(){var _useContext=useContext(Context),setIsLoggedIn=_useContext.setIsLoggedIn,setCartId=_useContext.setCartId,setPhoneNumber=_useContext.setPhoneNumber;var checkAuth=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data,cartLocalId;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return localStorage.getItem(\"turfUserDetails\");case 2:data=_context.sent;cartLocalId=localStorage.getItem(\"turfCart\");setCartId(function(){return cartLocalId?cartLocalId:null;});setPhoneNumber(function(){var _data$user;return(data===null||data===void 0?void 0:(_data$user=data.user)===null||_data$user===void 0?void 0:_data$user.phoneNumber)?data.user.phoneNumber:null;});setIsLoggedIn(function(){return data!==null?true:false;});case 7:case\"end\":return _context.stop();}}},_callee);})),[setIsLoggedIn,setCartId,setPhoneNumber]);useEffect(function(){checkAuth();},[checkAuth]);return/*#__PURE__*/_jsxs(Router,{children:[/*#__PURE__*/_jsx(Headers,{}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",exact:true,component:Home}),/*#__PURE__*/_jsx(Route,{path:\"/cart\",exact:true,component:Cart}),/*#__PURE__*/_jsx(Route,{path:\"/login\",exact:true,component:Login}),/*#__PURE__*/_jsx(Route,{path:\"/signup\",exact:true,component:Signup}),/*#__PURE__*/_jsx(ProtectedRoutes,{path:\"/profile\",children:/*#__PURE__*/_jsx(Profile,{})}),/*#__PURE__*/_jsx(ProtectedRoutes,{path:\"/checkout\",children:/*#__PURE__*/_jsx(Checkout,{})}),/*#__PURE__*/_jsx(ProtectedRoutes,{path:\"/payment-success\",children:/*#__PURE__*/_jsx(PaymentSuccess,{})}),/*#__PURE__*/_jsx(Route,{path:\"/logout\",exact:true,render:function render(){setIsLoggedIn(false);localStorage.removeItem(\"turfUserDetails\");localStorage.removeItem(\"turfCart\");return/*#__PURE__*/_jsx(Redirect,{to:\"/\"});}}),/*#__PURE__*/_jsx(Redirect,{to:\"/\"})]}),/*#__PURE__*/_jsx(ToastContainer,{pauseOnHover:false,autoClose:3000})]});};export default Routes;","map":{"version":3,"sources":["/var/www/turf2/src/routes/routes.js"],"names":["React","useCallback","useContext","useEffect","BrowserRouter","Router","Switch","Redirect","Route","Cart","Headers","Home","Login","Profile","ProtectedRoutes","ToastContainer","Signup","Context","Checkout","PaymentSuccess","Routes","setIsLoggedIn","setCartId","setPhoneNumber","checkAuth","localStorage","getItem","data","cartLocalId","user","phoneNumber","removeItem"],"mappings":"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","sourcesContent":["import React, { useCallback, useContext, useEffect } from \"react\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Redirect,\n  Route,\n} from \"react-router-dom\";\nimport Cart from \"../pages/Cart\";\nimport Headers from \"../components/Headers\";\nimport Home from \"../pages/Home\";\nimport Login from \"../pages/Login\";\nimport Profile from \"../pages/Profile\";\nimport ProtectedRoutes from \"./protected.routes\";\nimport { ToastContainer } from \"react-toastify\";\nimport Signup from \"../pages/Signup\";\nimport { Context } from \"../data/context\";\nimport Checkout from \"../pages/Checkout\";\nimport PaymentSuccess from \"../pages/PaymentSuccess\";\n\nconst Routes = () => {\n  const { setIsLoggedIn, setCartId, setPhoneNumber } = useContext(Context);\n\n  const checkAuth = useCallback(async () => {\n    const data = await localStorage.getItem(\"turfUserDetails\");\n    const cartLocalId = localStorage.getItem(\"turfCart\");\n\n    setCartId(() => (cartLocalId ? cartLocalId : null));\n\n    setPhoneNumber(() =>\n      data?.user?.phoneNumber ? data.user.phoneNumber : null\n    );\n    setIsLoggedIn(() => (data !== null ? true : false));\n  }, [setIsLoggedIn, setCartId, setPhoneNumber]);\n\n  useEffect(() => {\n    checkAuth();\n  }, [checkAuth]);\n  return (\n    <Router>\n      <Headers />\n      <Switch>\n        <Route path=\"/\" exact component={Home} />\n        <Route path=\"/cart\" exact component={Cart} />\n        <Route path=\"/login\" exact component={Login} />\n        <Route path=\"/signup\" exact component={Signup} />\n\n        <ProtectedRoutes path=\"/profile\">\n          <Profile />\n        </ProtectedRoutes>\n\n        <ProtectedRoutes path=\"/checkout\">\n          <Checkout />\n        </ProtectedRoutes>\n\n        <ProtectedRoutes path=\"/payment-success\">\n          <PaymentSuccess />\n        </ProtectedRoutes>\n\n        <Route\n          path=\"/logout\"\n          exact\n          render={() => {\n            setIsLoggedIn(false);\n            localStorage.removeItem(\"turfUserDetails\");\n            localStorage.removeItem(\"turfCart\");\n            return <Redirect to=\"/\" />;\n          }}\n        />\n\n        <Redirect to=\"/\" />\n      </Switch>\n      <ToastContainer pauseOnHover={false} autoClose={3000} />\n    </Router>\n  );\n};\n\nexport default Routes;\n"]},"metadata":{},"sourceType":"module"}