{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/var/www/turf2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useCallback,useEffect}from\"react\";import classnames from\"classnames\";import styles from\"../css/BookingSummary.module.css\";import axios from\"axios\";import api from\"../config/api\";import headerWithToken from\"../config/headerWithToken\";import{SlotCardItem}from\"./SlotCardItem\";var BookingSummary=function BookingSummary(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),history=_useState2[0],setHistory=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),upcoming=_useState4[0],setUpComing=_useState4[1];var bookingSummary=useCallback(function(){var data=JSON.parse(localStorage.getItem(\"turfUserDetails\"));axios.get(api+\"user/booking-history?userPhoneNumber=\"+data.user.phoneNumber,headerWithToken).then(function(res){var filterUpComing=res.data.body.bookedTimeSlots.filter(function(item){return new Date()<new Date(item.date);});setUpComing(filterUpComing);var filterHistory=res.data.body.bookedTimeSlots.filter(function(item){return new Date()>new Date(item.date);});setHistory(filterHistory);}).catch(function(err){console.log(err);});},[]);var handleOnClick=function handleOnClick(index,ground,id,item){console.log(\"delete\",item);var body={bookingId:item.bookingId,price:item.price,turfId:item.turfId,userId:item.userId,date:item.date,startTime:item.startTime,endTime:item.endTime};axios.post(api+\"user/cancel-booking\",body,headerWithToken).then(function(res){console.log(res.data);});};useEffect(function(){bookingSummary();},[bookingSummary]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:classnames(\"box\",styles.dateCardWrapper),children:[/*#__PURE__*/_jsx(\"p\",{className:\"card-header p-5 title has-text-white\",children:\"Upcoming Booking\"}),/*#__PURE__*/_jsx(\"div\",{className:classnames(\"card-content\",styles.historygrid),children:upcoming&&upcoming.map(function(item,index){return/*#__PURE__*/_jsx(SlotCardItem,{item:item,index:index,handleOnClick:handleOnClick,id:1},index);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:classnames(\"box\",styles.dateCardWrapper),children:[/*#__PURE__*/_jsx(\"p\",{className:\"card-header title has-text-white p-5\",children:\"Booking History\"}),/*#__PURE__*/_jsx(\"div\",{className:classnames(\"card-content\",styles.historygrid),children:history&&history.map(function(item,index){return/*#__PURE__*/_jsx(SlotCardItem,{item:item,index:index,handleOnClick:function handleOnClick(){},id:1,isHistory:true},index);})})]})]});};export default BookingSummary;","map":{"version":3,"sources":["/var/www/turf2/src/components/BookingSummary.jsx"],"names":["React","useState","useCallback","useEffect","classnames","styles","axios","api","headerWithToken","SlotCardItem","BookingSummary","history","setHistory","upcoming","setUpComing","bookingSummary","data","JSON","parse","localStorage","getItem","get","user","phoneNumber","then","res","filterUpComing","body","bookedTimeSlots","filter","item","Date","date","filterHistory","catch","err","console","log","handleOnClick","index","ground","id","bookingId","price","turfId","userId","startTime","endTime","post","dateCardWrapper","historygrid","map"],"mappings":"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","sourcesContent":["import React, { useState, useCallback, useEffect } from \"react\";\nimport classnames from \"classnames\";\nimport styles from \"../css/BookingSummary.module.css\";\nimport axios from \"axios\";\nimport api from \"../config/api\";\nimport headerWithToken from \"../config/headerWithToken\";\nimport { SlotCardItem } from \"./SlotCardItem\";\n\nconst BookingSummary = () => {\n  const [history, setHistory] = useState([]);\n  const [upcoming, setUpComing] = useState([]);\n\n  const bookingSummary = useCallback(() => {\n    const data = JSON.parse(localStorage.getItem(\"turfUserDetails\"));\n    axios\n      .get(\n        api + \"user/booking-history?userPhoneNumber=\" + data.user.phoneNumber,\n        headerWithToken\n      )\n      .then((res) => {\n        const filterUpComing = res.data.body.bookedTimeSlots.filter(function (\n          item\n        ) {\n          return new Date() < new Date(item.date);\n        });\n        setUpComing(filterUpComing);\n        const filterHistory = res.data.body.bookedTimeSlots.filter(function (\n          item\n        ) {\n          return new Date() > new Date(item.date);\n        });\n        setHistory(filterHistory);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }, []);\n\n  const handleOnClick = (index, ground, id, item) => {\n    console.log(\"delete\", item);\n    const body = {\n      bookingId: item.bookingId,\n      price: item.price,\n      turfId: item.turfId,\n      userId: item.userId,\n      date: item.date,\n      startTime: item.startTime,\n      endTime: item.endTime,\n    };\n    axios\n      .post(api + \"user/cancel-booking\", body, headerWithToken)\n      .then((res) => {\n        console.log(res.data);\n      });\n  };\n\n  useEffect(() => {\n    bookingSummary();\n  }, [bookingSummary]);\n\n  return (\n    <>\n      <div className={classnames(\"box\", styles.dateCardWrapper)}>\n        <p className=\"card-header p-5 title has-text-white\">Upcoming Booking</p>\n        <div className={classnames(\"card-content\", styles.historygrid)}>\n          {upcoming &&\n            upcoming.map((item, index) => (\n              <SlotCardItem\n                key={index}\n                item={item}\n                index={index}\n                handleOnClick={handleOnClick}\n                id={1}\n              />\n            ))}\n        </div>\n      </div>\n      <div className={classnames(\"box\", styles.dateCardWrapper)}>\n        <p className=\"card-header title has-text-white p-5\">Booking History</p>\n        <div className={classnames(\"card-content\", styles.historygrid)}>\n          {history &&\n            history.map((item, index) => (\n              <SlotCardItem\n                key={index}\n                item={item}\n                index={index}\n                handleOnClick={() => {}}\n                id={1}\n                isHistory={true}\n              />\n            ))}\n        </div>\n      </div>\n    </>\n  );\n};\nexport default BookingSummary;\n"]},"metadata":{},"sourceType":"module"}